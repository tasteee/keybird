@import '@radix-ui/colors/black-alpha.css';

.ProgressionPanel {
	overflow-x: auto;
	overflow-y: visible;
	width: 100vw;
	max-width: 100vw;
	background: var(--sand-1);
	height: 132px;
	border-top: 1px solid var(--sand-7);
	z-index: 101;
}

.ProgressionPanel .bottom.grid-background {
	align-items: center;
	position: relative;
	min-height: 48px;
	border-radius: 2px;
	border: 1px solid #373b39;

	/* Add vertical stripes: */
	background-image: repeating-linear-gradient(
		to right,
		transparent,
		transparent 6.15%,
		/* space before line (slightly less than 1/16 to make line visible) */ #373b39 6.25%,
		/* line color at 1/16 */ transparent 6.35% /* immediately return to transparent */
	);
}

/* Any siblings to the selected one... */
.ProgressionPanel .isSelected ~ * {
	opacity: 0.55;
}

.ProgressionPanel :has(~ .isSelected) {
	opacity: 0.55;
}

.TimingWrapper {
	display: flex;
	height: 100%;
	position: relative;
	z-index: 2;
	height: 46px;
	bottom: 2px;
}

.TimingWrapper.dragging {
	z-index: 10;
}

.TimingWrapper .handle {
	position: absolute;
	top: 0;
	width: 8px;
	height: 100%;
	background: #b3b3b3;
	opacity: 0;
	cursor: ew-resize;
	z-index: 3;
	transition: all 0.15s ease;
}

.TimingWrapper:hover .handle {
	opacity: 0.6;
}

.TimingWrapper .handle:hover {
	background: #888;
	opacity: 0.9 !important;
}

.TimingWrapper .handle.left {
	left: -4px;
	border-radius: 4px 0 0 4px;
}

.TimingWrapper .handle.right {
	right: -4px;
	border-radius: 0 4px 4px 0;
}

/* Active dragging state */
.TimingWrapper.dragging .handle {
	opacity: 1;
	background: #666;
}

.TimingWrapper.dragging .chord-content {
	opacity: 0.8;
}

/* Beat markers (optional - for better visual feedback) */
.grid-background::before {
	content: '';
	position: absolute;
	top: -20px;
	left: 0;
	right: 0;
	height: 20px;
	background: repeating-linear-gradient(to right, transparent 0%, transparent calc(6.25%), #666 calc(6.25%), #666 6.25%);
	pointer-events: none;
	opacity: 0.3;
}

.grid-background,
.bottom,
.ProgressionGrid,
.scrollableContainer {
	overflow-y: auto;
	overflow-x: auto;
	scrollbar-width: none; /* Firefox */
}
.grid-background::-webkit-scrollbar,
.bottom::-webkit-scrollbar,
.ProgressionGrid::-webkit-scrollbar,
.scrollableContainer::-webkit-scrollbar {
	display: none; /* Chrome, Safari, Opera */
}

/* reset */
input {
	all: unset;
}

.LabelRoot {
	font-size: 15px;
	font-weight: 500;
	line-height: 35px;
	color: white;
}

.durationInput input {
	padding-left: 4px;
}

.Input {
	width: 200px;
	display: inline-flex;
	align-items: center;
	justify-content: center;
	border-radius: 4px;
	padding: 0 10px;
	height: 35px;
	font-size: 15px;
	line-height: 1;
	color: white;
	background-color: var(--black-a2);
	box-shadow: 0 0 0 1px var(--black-a6);
}

.Input:focus {
	box-shadow: 0 0 0 2px black;
}

.Input::selection {
	background-color: var(--black-a6);
	color: white;
}

.ProgressionGrid {
	width: 100%;
	heigh: 56px;
	border-radius: 4px;
}

/* Scroll indicators */
.scrollIndicator {
	position: fixed;
	z-index: 20;
	pointer-events: none;
	display: flex;
	align-items: center;
	justify-content: center;
	width: 24px;
	height: 24px;
	background: var(--sand-5);
	border: 1px solid var(--sand-8);
	border-radius: 50%;
	box-shadow: 0 2px 8px var(--black-a6);
}

.scrollIndicatorLeft {
	transform: translate(-70%, 85%) rotate(180deg);
}

.scrollIndicatorRight {
	transform: translate(-110%, 85%);
	right: 0px;
}

/* Scrollable container with shadows */
.scrollableContainer {
	position: relative;
	/* Hide scrollbar */
	scrollbar-width: none; /* Firefox */
	-ms-overflow-style: none; /* Internet Explorer 10+ */
}

/* Hide scrollbar for WebKit browsers */
.scrollableContainer::-webkit-scrollbar {
	display: none;
}

/* Left shadow - appears when can scroll left */
.scrollableContainer::before {
	content: '';
	height: 60px;
	position: fixed;
	left: var(--space-8);
	width: 20px;
	background: linear-gradient(to right, var(--sand-1), transparent);
	z-index: 10;
	pointer-events: none;
	opacity: 0;
	transition: opacity 0.2s ease;
}

/* Right shadow - appears when can scroll right */
.scrollableContainer::after {
	content: '';
	position: fixed;
	right: var(--space-8);
	height: 60px;
	width: 20px;
	background: linear-gradient(to left, var(--sand-1), transparent);
	z-index: 10;
	pointer-events: none;
	opacity: 0;
	transition: opacity 0.2s ease;
}

/* Show shadows when scrollable */
.ProgressionGrid.canScrollLeft .scrollableContainer::before {
	opacity: 1;
}

.ProgressionGrid.canScrollRight .scrollableContainer::after {
	opacity: 1;
}

.ProgressionPanel .rt-Card:where(.rt-variant-surface)::before {
	background: none !important;
	backdrop-filter: none !important;
}

.gridBackground {
	border: 1px solid var(--sand-7);
}

.gridBlock {
	height: 100%;
	width: 100%;
	display: flex;
}

.gridBlock:not(:last-child) {
	border-right: 1px solid var(--sand-7);
}

.ChordOptions {
	position: absolute;
	right: var(--space-8);
}

.ChordOptions .LabelRoot {
	font-size: 12px;
	font-weight: 500;
	line-height: 20px;
	color: var(--sand-text);
}

.gridBlock.lighter {
	background: var(--sand-2);
}

.rightArrowIconButton {
	padding-left: 4px;
	padding-right: 8px;
}

.leftArrowIconButton {
	padding-left: 8px;
	padding-right: 4px;
}

/* Play Button Styles */
.playButton {
	width: 27px;
	height: 27px;
	border-radius: 50%;
	margin-right: 4px;
	padding-left: 2px;
	background-color: var(--gray-9);
	display: flex;
	align-items: center;
	justify-content: center;
	cursor: pointer;
	margin-left: 8px;
	transition: all 0.2s ease;
	border: 2px solid transparent;
}

.playButton:hover {
	background-color: var(--gray-8);
	transform: scale(1.05);
}

.playButton.isPlaying {
	transform: scale(1.1);
	background-color: white;
	border: 2px solid rgba(255, 255, 255, 0.8);
	box-shadow:
		0 0 8px rgba(255, 255, 255, 0.6),
		0 0 16px rgba(255, 255, 255, 0.4),
		0 0 24px rgba(255, 255, 255, 0.2),
		0 0 32px rgba(255, 255, 255, 0.1),
		inset 0 1px 0 rgba(255, 255, 255, 0.9),
		inset 0 -1px 2px rgba(0, 0, 0, 0.1);
	animation: playButtonPulse 2s ease-in-out infinite;
}

@keyframes playButtonPulse {
	0%,
	100% {
		box-shadow:
			0 0 8px rgba(255, 255, 255, 0.6),
			0 0 16px rgba(255, 255, 255, 0.4),
			0 0 24px rgba(255, 255, 255, 0.2),
			0 0 32px rgba(255, 255, 255, 0.1),
			inset 0 1px 0 rgba(255, 255, 255, 0.9),
			inset 0 -1px 2px rgba(0, 0, 0, 0.1);
	}
	50% {
		box-shadow:
			0 0 12px rgba(255, 255, 255, 0.8),
			0 0 20px rgba(255, 255, 255, 0.6),
			0 0 28px rgba(255, 255, 255, 0.4),
			0 0 36px rgba(255, 255, 255, 0.2),
			inset 0 1px 0 rgba(255, 255, 255, 1),
			inset 0 -1px 2px rgba(0, 0, 0, 0.05);
		transform: scale(1.12);
	}
}
